services:
    worker:
        build:
            context: .
            dockerfile: worker/Dockerfile
        environment:
            # Connect via the webapp/nginx reverse-proxy (supports WS upgrade)
            # Examples:
            # - ws://localhost:8080/api/ws
            # - wss://deepbounty.example.com/api/ws
            SERVER_WS_URL: ${SERVER_WS_URL:-ws://localhost:8080/api/ws}

            # Must match server/config/config.json => workerKey
            SERVER_SECRET_KEY: ${WORKER_KEY}
